---
title: 关于浮点损失与精度问题
date: 2021-02-07 00:36:31
categories: [杂记]
tags:
mathjax: true
---

《关于一道 ABC 的 D 题我却提交了整整三页这件事》

<!-- more -->

# [ABC#191 D](https://atcoder.jp/contests/abc191/tasks/abc191_d)

卡精度原因是浮点数其实是二进制表示的，然而总有无法完美表示的浮点数。~~其实$IEEE754$怎么算的我已经忘了~~

比如下面这个例子

```c++
double x;
scanf("%lf", &x);
ll d = x * 10000;
printf("%lld\n", d);
```

##### Input

```
1.001
```

##### Output

```
10009
```

面对卡精度题，一个较好的做法是把`double`转成`long long`来运算

然而`double`转`long long`就有一个坑。。。就是上面的代码，直接乘会出事

方法有两个

- 换一个读入方式，比如字符串读入
- 使用`d = round(x * 10000)`来替代`d = x * 10000`

还有一些其他的坑点，比如转换数字过大时考虑使用`long double`和`__int128`

希望下次碰见精度问题的时候自己不要忘了这篇博客

**铭  记  历  史**

{% asset_img 铭记历史.png %}

